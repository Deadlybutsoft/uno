<Page x:Class="MemoryMatch.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:MemoryMatch"
      xmlns:vm="using:MemoryMatch.ViewModels"
      Background="#0a0a0f"
      Loaded="Page_Loaded">

    <Page.Resources>
        <!-- Beautiful gradient accent brush -->
        <LinearGradientBrush x:Key="AccentGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#667eea" Offset="0"/>
            <GradientStop Color="#764ba2" Offset="0.5"/>
            <GradientStop Color="#f093fb" Offset="1"/>
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="GoldGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#f7971e" Offset="0"/>
            <GradientStop Color="#ffd200" Offset="1"/>
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="CyanGradient" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#00d2ff" Offset="0"/>
            <GradientStop Color="#3a7bd5" Offset="1"/>
        </LinearGradientBrush>
        
        <LinearGradientBrush x:Key="DarkGlassBackground" StartPoint="0,0" EndPoint="0,1">
            <GradientStop Color="#15151f" Offset="0"/>
            <GradientStop Color="#1a1a2e" Offset="1"/>
        </LinearGradientBrush>
    </Page.Resources>

    <Grid Padding="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Animated Background Orbs -->
        <Canvas Grid.RowSpan="4" Opacity="0.3">
            <Ellipse Width="300" Height="300" Canvas.Left="-100" Canvas.Top="-50">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#764ba2" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
            <Ellipse Width="400" Height="400" Canvas.Left="600" Canvas.Top="400">
                <Ellipse.Fill>
                    <RadialGradientBrush>
                        <GradientStop Color="#4facfe" Offset="0"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </RadialGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
        </Canvas>

        <!-- Header Section -->
        <StackPanel Grid.Row="0" HorizontalAlignment="Center" Margin="0,10,0,20">
            <TextBlock x:Name="TitleText"
                       Text="✦ MEMORY MATCH ✦"
                       FontSize="42"
                       FontWeight="Bold"
                       Foreground="{StaticResource AccentGradient}"
                       HorizontalAlignment="Center"
                       Opacity="0">
            </TextBlock>
            <TextBlock x:Name="SubtitleText"
                       Text="Find all matching pairs to win!"
                       FontSize="16"
                       Foreground="#888899"
                       HorizontalAlignment="Center"
                       Margin="0,8,0,0"
                       Opacity="0"/>
        </StackPanel>

        <!-- Stats Panel with Glassmorphism -->
        <Border Grid.Row="1" 
                Background="#15151f"
                CornerRadius="20"
                Padding="30,20"
                Margin="0,0,0,20"
                BorderBrush="#333355"
                BorderThickness="1"
                HorizontalAlignment="Center">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Score -->
                <StackPanel Grid.Column="0">
                    <TextBlock Text="SCORE" FontSize="11" Foreground="#666680" FontWeight="SemiBold"/>
                    <TextBlock x:Name="ScoreText" Text="0" FontSize="28" FontWeight="Bold" Foreground="{StaticResource GoldGradient}" Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Separator -->
                <Border Grid.Column="1" Width="1" Height="40" Background="#333355" HorizontalAlignment="Center"/>
                
                <!-- Moves -->
                <StackPanel Grid.Column="2">
                    <TextBlock Text="MOVES" FontSize="11" Foreground="#666680" FontWeight="SemiBold"/>
                    <TextBlock x:Name="MovesText" Text="0" FontSize="28" FontWeight="Bold" Foreground="{StaticResource CyanGradient}" Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Separator -->
                <Border Grid.Column="3" Width="1" Height="40" Background="#333355" HorizontalAlignment="Center"/>
                
                <!-- Matches -->
                <StackPanel Grid.Column="4">
                    <TextBlock Text="MATCHES" FontSize="11" Foreground="#666680" FontWeight="SemiBold"/>
                    <TextBlock x:Name="MatchesText" Text="0/8" FontSize="28" FontWeight="Bold" Foreground="#43e97b" Margin="0,4,0,0"/>
                </StackPanel>
                
                <!-- Separator -->
                <Border Grid.Column="5" Width="1" Height="40" Background="#333355" HorizontalAlignment="Center"/>
                
                <!-- Combo -->
                <StackPanel Grid.Column="6">
                    <TextBlock Text="COMBO" FontSize="11" Foreground="#666680" FontWeight="SemiBold"/>
                    <TextBlock x:Name="ComboText" Text="0x" FontSize="28" FontWeight="Bold" Foreground="#f093fb" Margin="0,4,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Message Banner -->
        <Border x:Name="MessageBanner"
                Grid.Row="1"
                Background="#1a1a2e"
                CornerRadius="15"
                Padding="20,12"
                Margin="0,90,0,0"
                HorizontalAlignment="Center"
                BorderBrush="#4facfe"
                BorderThickness="1"
                Opacity="0">
            <TextBlock x:Name="MessageText"
                       Text="🎮 Match the pairs!"
                       FontSize="16"
                       FontWeight="SemiBold"
                       Foreground="White"/>
        </Border>

        <!-- Card Grid -->
        <ScrollViewer Grid.Row="2" 
                      HorizontalScrollBarVisibility="Disabled"
                      VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="CardGrid" 
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VariableSizedWrapGrid MaximumRowsOrColumns="4" 
                                               ItemWidth="110" 
                                               ItemHeight="130"
                                               Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </ScrollViewer>

        <!-- Footer with Buttons -->
        <StackPanel Grid.Row="3" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Center"
                    Spacing="20"
                    Margin="0,20,0,0">
            
            <!-- New Game Button -->
            <Button x:Name="NewGameButton"
                    Click="NewGameButton_Click"
                    Background="Transparent"
                    BorderThickness="0"
                    Padding="0"
                    CornerRadius="15">
                <Border Background="#15151f"
                        CornerRadius="15"
                        Padding="30,15"
                        BorderBrush="{StaticResource AccentGradient}"
                        BorderThickness="2">
                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <TextBlock Text="🔄" FontSize="20"/>
                        <TextBlock Text="NEW GAME" 
                                   FontSize="14" 
                                   FontWeight="Bold" 
                                   Foreground="White"
                                   VerticalAlignment="Center"/>
                    </StackPanel>
                </Border>
            </Button>
            
            <!-- Best Score Display -->
            <Border Background="#0d0d14"
                    CornerRadius="15"
                    Padding="25,15"
                    BorderBrush="#333355"
                    BorderThickness="1">
                <StackPanel Orientation="Horizontal" Spacing="10">
                    <TextBlock Text="🏆" FontSize="20"/>
                    <TextBlock Text="BEST:" FontSize="14" Foreground="#888899" VerticalAlignment="Center"/>
                    <TextBlock x:Name="BestScoreText" Text="0" FontSize="18" FontWeight="Bold" Foreground="{StaticResource GoldGradient}" VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Win Overlay -->
        <Border x:Name="WinOverlay"
                Grid.RowSpan="4"
                Background="#cc0a0a0f"
                Visibility="Collapsed">
            <Border Background="#1a1a2e"
                    CornerRadius="30"
                    Padding="50,40"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    BorderBrush="{StaticResource GoldGradient}"
                    BorderThickness="3">
                <StackPanel HorizontalAlignment="Center" Spacing="15">
                    <TextBlock Text="🎉" FontSize="80" HorizontalAlignment="Center"/>
                    <TextBlock Text="CONGRATULATIONS!" 
                               FontSize="32" 
                               FontWeight="Bold" 
                               Foreground="{StaticResource GoldGradient}"
                               HorizontalAlignment="Center"/>
                    <TextBlock x:Name="WinScoreText"
                               Text="Final Score: 0"
                               FontSize="24"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    <TextBlock x:Name="WinMovesText"
                               Text="Moves: 0"
                               FontSize="18"
                               Foreground="#888899"
                               HorizontalAlignment="Center"/>
                    <Button Click="NewGameButton_Click"
                            Background="{StaticResource AccentGradient}"
                            Foreground="White"
                            FontWeight="Bold"
                            FontSize="16"
                            Padding="40,15"
                            CornerRadius="25"
                            Margin="0,20,0,0">
                        <TextBlock Text="🎮 PLAY AGAIN"/>
                    </Button>
                </StackPanel>
            </Border>
        </Border>
    </Grid>
</Page>
